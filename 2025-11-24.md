# Práctica integradora

* Los estudiantes analizan tres escenarios distintos: una oficina con equipos Windows, un laboratorio con servidores Linux y un aula mixta. Deben decidir qué tecnología usar (Samba, NFS o carpetas compartidas de Windows), justificar su selección y definir qué permisos aplicar en cada caso. Finalmente, debaten sobre cómo integrar una impresora compartida y cómo organizar su control de acceso.

- Carpeta compartida entre Linux y Windows
  - Samba es una implementación libre del protocolo SMB (Server Message Block), también conocido como CIFS (Common Internet File System). 
  - Instala y configura Samba con una carpeta compartida /srv/docs.
  - Asigna permisos a un grupo específico.
  - Desde Windows, monta el recurso con \\servidor\docs.
```Bash
sudo apt update
sudo apt install samba -y

sudo mkdir -p /srv/docs

sudo groupadd grupo_docs
sudo chown :grupo_docs /srv/docs
sudo chmod 2770 /srv/docs

sudo useradd -m usuario1
sudo passwd usuario1
sudo usermod -aG grupo_docs usuario1

sudo nano /etc/samba/smb.conf

[docs]
   path = /srv/docs
   browseable = yes
   writable = yes
   valid users = @grupo_docs
   create mask = 0660
   directory mask = 0770
   comment = Carpeta compartida de documentos

sudo smbpasswd -a usuario1
sudo smbpasswd -e usuario1

sudo systemctl restart smbd
sudo systemctl enable smbd

\\<IP_DEL_SERVIDOR>\docs
# Si falla (en Linux)
smbclient //127.0.0.1/docs -U usuario1
# Si falla (en Windows)
net use \\<IP_DEL_SERVIDOR>\docs /user:usuario1 *
```

------------
------------

## Preguntas test

### Tema 2

¿Qué es VirtualBox?
a) Un editor de texto
b) Un hipervisor para crear y ejecutar máquinas virtuales
c) Un navegador web

¿Para qué se recomienda usar una IP estática en servidores?
a) Para que cambie cada vez que reinicias
b) Para que siempre tengan la misma dirección y sean fáciles de localizar
c) Para conectarse más rápido a Internet

¿Qué servicio debes habilitar en Ubuntu para permitir conexiones remotas por terminal?
a) FTP
b) SSH
c) RDP

Desde un PC cliente Windows, ¿con qué programa te conectas por SSH al Ubuntu Server?
a) Bloc de notas
b) PuTTY
c) Paint

Desde un PC con Linux, ¿cómo te conectarías al servidor Ubuntu por SSH?
a) ping usuario@ip_del_servidor
b) ssh usuario@ip_del_servidor
c) rdp usuario@ip_del_servidor

En tu Windows Server, ¿qué funcionalidad debes habilitar para conectarte con Escritorio Remoto?
a) Compartir archivos
b) Escritorio Remoto en las propiedades del sistema
c) Hyper-V

¿Cómo se llama la herramienta de cliente para conectarte al Escritorio Remoto en Windows?
a) Conexión a Escritorio Remoto (mstsc)
b) Conexión SSH
c) Conexión Telnet

¿Qué requisito básico debe cumplirse para que el cliente pueda conectarse por Escritorio Remoto al servidor?
a) Tener un navegador instalado
b) Estar en la misma red o tener conectividad IP con el servidor
c) Que el servidor tenga WiFi

-------------

### Tema 3

¿Qué rol debes instalar en Windows Server para crear un dominio de Active Directory?
a) Servicios de Escritorio Remoto
b) Servicios de dominio de Active Directory
c) Servicios de archivos e impresión

Después de instalar “Servicios de dominio de Active Directory”, el siguiente paso es:
a) Formatear el disco
b) Promover el servidor a Controlador de Dominio
c) Instalar un navegador web

¿Qué es un Controlador de Dominio (Domain Controller)?
a) Un servidor que almacena copias de seguridad
b) Un servidor que gestiona usuarios, grupos y la autenticación del dominio
c) Un servidor dedicado solo a impresión

¿Para qué sirve crear usuarios y grupos en Active Directory?
a) Para organizar mejor los cables de red
b) Para administrar permisos y accesos de forma centralizada
c) Solo para cambiar el fondo de pantalla a los usuarios

En Linux, el comando sudo useradd juan sirve para:
a) Crear una carpeta compartida
b) Crear un nuevo usuario llamado juan
c) Cambiar la contraseña del usuario juan

¿Qué hace el comando sudo passwd juan?
a) Elimina al usuario juan
b) Cambia o asigna la contraseña al usuario juan
c) Mueve al usuario juan a otro grupo

¿Para qué sirve el comando sudo usermod -aG sudo juan?
a) Añadir al usuario juan al grupo de administradores (sudo)
b) Borrar todos los grupos del usuario juan
c) Cambiar el nombre del usuario juan

Después de ejecutar sudo usermod -aG sudo juan, el usuario juan podrá:
a) Apagar el sistema únicamente
b) Ejecutar comandos como administrador usando sudo
c) Solo cambiar su contraseña

¿Qué diferencia principal hay entre crear usuarios en Active Directory y en Linux localmente (como juan)?
a) En AD el usuario solo existe en el navegador
b) En AD el usuario es del dominio y en Linux el usuario es local al servidor
c) No hay ninguna diferencia

-------------

### Tema 4

¿Dónde se configura una IP estática en Windows Server?
a) En el Bloc de notas
b) En el “Centro de redes y recursos compartidos”
c) En el Visor de eventos

¿Qué archivo debes editar en Ubuntu Server para configurar una IP estática con Netplan?
a) /etc/network/interfaces
b) /etc/netplan/*.yaml
c) /etc/sysconfig/network

¿Qué comando te permite comprobar la conectividad entre máquinas?
a) test
b) ping
c) dir

Si un cliente Windows 10 está configurado en modo DHCP, debería obtener su IP desde:
a) El propio ordenador
b) El servidor DHCP de la red
c) No se puede, tienes que poner la IP a mano

Cuando un cliente recibe IP por DHCP, normalmente obtiene también:
a) Fecha y hora
b) Información de CPU
c) Puerta de enlace y DNS

¿Qué rol debes instalar en Windows Server para gestionar resolución de nombres?
a) DHCP
b) DNS
c) Hyper-V

¿Qué tipo de registro DNS se usa para asignar un nombre (p. ej. server1.smr.local) a una IP?
a) Registro MX
b) Registro CNAME
c) Registro A

En Linux, el servidor DNS más usado y que instalas con apt install es:
a) Apache
b) BIND9
c) MariaDB

El archivo donde se declaran las zonas DNS en BIND9 es:
a) /etc/bind/named.conf.local
b) /etc/bind/resolv.conf
c) /etc/dns/zones.txt

¿Qué comando puedes usar desde Windows o Linux para comprobar que el DNS funciona?
a) dns-check
b) nslookup
c) resolver-test

Si nslookup servidor.smr.local responde con la IP correcta, significa que:
a) El ping funciona más rápido
b) El DNS está resolviendo correctamente
c) El equipo tiene activado el proxy

Para que un cliente Windows obtenga IP automáticamente, debes configurarlo como:
a) “Usar la siguiente dirección IP”
b) “Obtener una dirección IP automáticamente (DHCP)”
c) “Modo puente”

¿Qué indica si un cliente Windows recibe una IP 169.254.x.x?
a) Todo está funcionando bien
b) No ha encontrado un servidor DHCP
c) El DNS está caído

Cuando creas una zona en Windows DNS, debes especificar:
a) Un dominio (p. ej., smr.local)
b) El nombre del procesador del servidor
c) La versión de Windows

¿Qué deben resolver correctamente tanto Windows DNS como BIND9 en la práctica?
a) Cuentas de usuario
b) Nombres de dominio y sus direcciones IP
c) Tamaño de disco

-------------

¿Qué es Samba en Linux?
a) Un editor de vídeo
b) Una implementación libre del protocolo SMB/CIFS para compartir archivos e impresoras
c) Un antivirus

¿Para qué sirve crear la carpeta /srv/docs?
a) Para instalar programas
b) Para usarla como carpeta compartida de documentos
c) Para guardar copias de seguridad del sistema

El comando sudo apt install samba -y sirve para:
a) Instalar el navegador web
b) Instalar el servidor Samba
c) Instalar el servidor DHCP

¿Por qué se ejecuta sudo chown :grupo_docs /srv/docs?
a) Para cambiar el dueño de la carpeta a root
b) Para asignar el grupo grupo_docs como grupo propietario de /srv/docs
c) Para borrar la carpeta /srv/docs

El usuario usuario1 se crea con:
a) sudo useradd -m usuario1
b) sudo newuser usuario1
c) sudo mkuser usuario1

¿Qué función tiene sudo smbpasswd -a usuario1?
a) Crear la carpeta compartida en Samba
b) Dar de alta a usuario1 en Samba y asignarle una contraseña para el recurso compartido
c) Reiniciar el servicio smbd

En el bloque [docs] de /etc/samba/smb.conf, la línea path = /srv/docs indica:
a) El nombre del usuario que puede acceder
b) La ruta en el sistema de archivos donde está la carpeta que se compartirá
c) El nombre del dominio

En la configuración de Samba, valid users = @grupo_docs significa que:
a) Solo puede entrar el usuario root
b) Pueden acceder todos los usuarios del sistema
c) Solo pueden acceder los usuarios que pertenezcan al grupo grupo_docs

¿Cómo se accede desde Windows a la carpeta compartida docs del servidor Samba?
a) Escribiendo C:\docs en el explorador
b) Escribiendo \\<IP_DEL_SERVIDOR>\docs en el explorador de archivos
c) Escribiendo http://<IP_DEL_SERVIDOR>/docs en el navegador

¿Por qué se ejecuta sudo systemctl restart smbd tras cambiar smb.conf?
a) Para apagar el servidor
b) Para que Samba lea la nueva configuración y la aplique
c) Para actualizar el sistema operativo

¿Qué requisito básico debe cumplirse para que un equipo Windows pueda conectar con \\<IP_DEL_SERVIDOR>\docs?
a) Que el servidor tenga instalado un navegador
b) Que exista conectividad de red (IP) entre el cliente y el servidor
c) Que el cliente tenga dos tarjetas de red

Si desde Windows, al intentar entrar en \\<IP_DEL_SERVIDOR>\docs, pide usuario y contraseña, ¿qué credenciales debes usar?
a) Cualquier usuario de Windows
b) El usuario y contraseña configurados en Samba (por ejemplo, usuario1 y su clave de smbpasswd)
c) El usuario “admin” sin contraseña
