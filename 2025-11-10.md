# Práctica

## En Linux, instala BIND9, configura una zona directa en /etc/bind/named.conf.local y define sus registros en un archivo de zona. Usa nslookup desde un cliente para comprobar que ambos resuelven los nombres correctamente. Lo hacemos entre dos Ubuntu Server, uno de ellos con dos interfaces de red (uno aislado y otro Puente) y el otro un interfaz de red (red aislada), lo hacemos así para poder conectarnos por SSH.

```Bash
# Instalar BIND9
sudo apt install bind9 -y

# Editar configuración de zonas
sudo nano /etc/bind/named.conf.local
# Añadir al final:
# zone "smr.local" {
#     type master;
#     file "/etc/bind/db.smr.local";
# };

# Crear archivo de zona a partir de plantilla
sudo cp /etc/bind/db.local /etc/bind/db.smr.local

sudo tee /etc/bind/db.smr.local >/dev/null <<'EOF'
$TTL 604800
@   IN  SOA ns.smr.local. admin.smr.local. (
        2025110501 ; Serial
        604800     ; Refresh
        86400      ; Retry
        2419200    ; Expire
        604800 )   ; Negative Cache TTL
;
@       IN  NS  ns.smr.local.
ns      IN  A   192.168.1.20
server  IN  A   192.168.1.20
EOF

sudo chown root:bind /etc/bind/db.smr.local
sudo chmod 0644 /etc/bind/db.smr.local

sudo named-checkzone smr.local /etc/bind/db.smr.local
# Debe decir algo como: "loaded serial 2025110501" y "OK"

sudo systemctl restart bind9
journalctl -u bind9 -n 30 --no-pager

# Prueba contra BIND
dig @127.0.0.1 server.smr.local A +short

# Reiniciar el servicio
# sudo systemctl restart bind9

# Probar la resolución
# nslookup server.smr.local 192.168.1.20
```
